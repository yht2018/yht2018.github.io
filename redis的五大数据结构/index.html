<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="yht&#39;s blog">
  <meta name="keyword" content="Java">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      redis的五大数据结构 | Hexo
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Hexo</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>redis的五大数据结构</h2>
  <p class="post-date">2018-07-05</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h2 id="redis简介："><a href="#redis简介：" class="headerlink" title="redis简介："></a>redis简介：</h2><p>redis是基于内存的非关系型数据库，它是键值对的形式存储的数据，可以实现快速查询，但是其存储的数据缺少结构化。<br>一个redis势力可以包括多个数据库，最多可以提供16个数据库，下标从0到15，客户端默认连接的是第0号数据库。<br>但是不同的应用系统使用的是不同的redis实例，而不是使用同一个redis实例下的不同的数据库。</p>
<h2 id="jedis"><a href="#jedis" class="headerlink" title="jedis"></a>jedis</h2><ul>
<li>jedis是redis的java客户端，我们可以通过jedis连接上redis服务器。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pom坐标：</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;2.7.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单实例连接</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"127.0.0.1"</span>,<span class="number">6379</span>);</span><br><span class="line">	jedis.set(<span class="string">"test"</span>,<span class="string">"xiaoxiao"</span>);</span><br><span class="line">	jedis.close();</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">/*单实例连接redis不能对redis连接进行共享，可以使用连接池对redis连接进行共享，提高资源利用率，使用jedisPool</span></span><br><span class="line"><span class="comment">   连接redis服务*/</span></span><br><span class="line"><span class="comment">//jedis连接池</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJedisPool</span><span class="params">()</span></span>&#123;</span><br><span class="line">	JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">	config.setMaxIdle(<span class="number">5</span>); <span class="comment">//设置最大空闲数</span></span><br><span class="line">	config.setMaxTotal(<span class="number">20</span>); <span class="comment">//设置最大的连接数</span></span><br><span class="line">	</span><br><span class="line">	JedisPool jedisPool = <span class="keyword">new</span> JedisPool(config,<span class="string">"127.0.0.1"</span>,<span class="number">6379</span>);</span><br><span class="line">	Jedis jedis = jedisPool.getResource();</span><br><span class="line">	jedis.set(<span class="string">"test"</span>,<span class="string">"dada"</span>);</span><br><span class="line">	jedis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>jedis与Spring整合<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jedisPoolConfig"</span> <span class="attr">class</span>=<span class="string">"redis.clients.jedis.JedisPoolConfig"</span>&gt;</span> </span><br><span class="line">	<span class="comment">&lt;!-- 最大连接数 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTotal"</span> <span class="attr">value</span>=<span class="string">"30"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 最大空闲连接数 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 每次释放连接的最大数目 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"numTestsPerEvictionRun"</span> <span class="attr">value</span>=<span class="string">"1024"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 释放连接的扫描间隔（毫秒） --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeBetweenEvictionRunsMillis"</span> <span class="attr">value</span>=<span class="string">"30000"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 连接最小空闲时间 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minEvictableIdleTimeMillis"</span> <span class="attr">value</span>=<span class="string">"1800000"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 连接空闲多久后释放, 当空闲时间&gt;该值 且 空闲连接&gt;最大空闲连接数 时直接释放 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"softMinEvictableIdleTimeMillis"</span> <span class="attr">value</span>=<span class="string">"10000"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 获取连接时的最大等待毫秒数,小于零:阻塞不确定的时间,默认-1 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxWaitMillis"</span> <span class="attr">value</span>=<span class="string">"1500"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 在获取连接的时候检查有效性, 默认false --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnBorrow"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 在空闲时检查有效性, 默认false --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testWhileIdle"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 连接耗尽时是否阻塞, false报异常,ture阻塞直到超时, 默认true --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"blockWhenExhausted"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置jedis连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jedisPool"</span> <span class="attr">class</span>=<span class="string">"redis.clients.jedis.JedisPool"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">ref</span>=<span class="string">"jedisPoolConfig"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"127.0.0.1"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"6379"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"springmvc.xml"</span>);</span><br><span class="line">JedisPool jedispool = (JedisPool) ac.getBean(<span class="string">"jedisPool"</span>);</span><br><span class="line">Jedis jedis = jedispool.getResource();</span><br><span class="line">jedis.set(<span class="string">"test"</span>,<span class="string">"yiyi"</span>);</span><br><span class="line">jedis.close();</span><br></pre></td></tr></table></figure>
<h2 id="String数据类型的相关命令："><a href="#String数据类型的相关命令：" class="headerlink" title="String数据类型的相关命令："></a>String数据类型的相关命令：</h2><ul>
<li>1：赋值和取值：<br>SET key value<br>GET key<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; set test <span class="number">123</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; get test</span><br><span class="line"><span class="string">"123“</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>当键不存在时返回空结果。</p>
<ul>
<li><p>2：递增数字：<br>INCR key<br>当存储的字符串是整数时，Redis提供了一个实用的命令INCR，其作用是让当前键值递增，并返回递增后的值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incr num</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incr num</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incr num</span><br><span class="line">(integer) <span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3：增加指定的整数：<br>INCRBY key increment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incrby num <span class="number">2</span></span><br><span class="line">(integer) <span class="number">5</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incrby num <span class="number">2</span></span><br><span class="line">(integer) <span class="number">7</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; incrby num <span class="number">2</span></span><br><span class="line">(integer) <span class="number">9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4：减少指定的整数：<br>DECR key<br>DECRBY key decrement</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; decr num</span><br><span class="line">(integer) <span class="number">6</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; decr num</span><br><span class="line">(integer) <span class="number">5</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; decrby num <span class="number">3</span></span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; decrby num <span class="number">3</span></span><br><span class="line">(integer) -<span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>5：向尾部追加值：<br>APPEND key value<br>APPEND的作用是向键值的末尾追加value。如果键不存在则将该键的值设置为value，即相当于 SET key value。返回值是追加后字符串的总长度。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; set str hello</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; append str <span class="string">" world!"</span></span><br><span class="line">(integer) <span class="number">12</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; get str</span><br><span class="line"><span class="string">"hello world!"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>6：获得字符串的长度：<br>STRLEN key<br>STRLEN命令返回键值的长度，如果键不存在则返回0。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; strlen str</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; set str hello</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; strlen str</span><br><span class="line">(integer) <span class="number">5</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>7：同时设置/获取多个键值：<br>MSET key value [key value …]<br>MGET key [key …]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; mset k1 v1 k2 v2 k3 v3</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; get k1</span><br><span class="line"><span class="string">"v1"</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; mget k1 k3</span><br><span class="line"><span class="number">1</span>) <span class="string">"v1"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"v3"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Hash数据类型的相关命令："><a href="#Hash数据类型的相关命令：" class="headerlink" title="Hash数据类型的相关命令："></a>Hash数据类型的相关命令：</h2><p>假设现在需要存储的是一个对象，比如user对象，我们使用String 类型的存储就比较不方便，还需要将对象转换为Json(String)这样的结构数据的时候才能存储，但是现在有一个数据结构，就是Hash,我们可以直接存储这个对象。</p>
<ul>
<li>1:赋值与取值：<br>HSET key field value 一次只能设置一个字段值<br>HGET key field                    一次只能获取一个字段值<br>HMSET key field value [field value …]              一次可以设置多个字段值<br>HMGET key field [field …]                                    一次可以获取多个字段值<br>HGETALL key<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hset user username zhangsan</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hget user username</span><br><span class="line"><span class="string">"zhangsan“</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>HSET命令不区分插入和更新操作，当执行插入操作时HSET命令返回1，当执行更新操作时返回0.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hmset user age <span class="number">20</span> username lisi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hmget user age username</span><br><span class="line"><span class="number">1</span>) <span class="string">"20"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"lisi"</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hgetall user</span><br><span class="line"><span class="number">1</span>) <span class="string">"age"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"20"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"username"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"lisi"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>2：判断字段是否存在：<br>HEXISTS key field<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hexists user age             查看user中是否有age字段</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hexists user name          查看user中是否有name字段</span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>HSETNX key field value<br>当字段不存在时赋值，类似HSET，区别在于如果字段已经存在，该命令不执行任何操作。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hsetnx user age <span class="number">30</span></span><br></pre></td></tr></table></figure></p>
<p>如果user中没有age字段则设置age值为30，否则不做任何操作<br>(integer) 0</p>
<ul>
<li><p>3：增加数字：<br>HINCRBY key field increment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hincrby user age <span class="number">2</span>         将用户的年龄加<span class="number">2</span></span><br><span class="line">(integer) <span class="number">22</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hget user age                 获取用户的年龄</span><br><span class="line"><span class="string">"22“</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4：删除字段：<br>可以删除一个或多个字段，返回值是被删除的字段个数<br>HDEL key field [field …]</p>
</li>
<li><p>5:只获取字段名或者字段值：<br>HKEYS key<br>HVALS key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hmset user age <span class="number">20</span> name lisi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hkeys user</span><br><span class="line"><span class="number">1</span>) <span class="string">"age"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"name"</span></span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hvals user</span><br><span class="line"><span class="number">1</span>) <span class="string">"20"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"lisi"</span></span><br><span class="line">``` </span><br><span class="line"><span class="number">6</span>：获取字段数量：</span><br><span class="line">HLEN key</span><br><span class="line">```Java</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; hlen user</span><br><span class="line">(integer) <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景<br>存储商品信息等；</p>
</li>
</ul>
<h2 id="list数据类型的相关命令："><a href="#list数据类型的相关命令：" class="headerlink" title="list数据类型的相关命令："></a>list数据类型的相关命令：</h2><p>列表类型（list）可以存储一个有序的字符串列表，常用的操作是向列表两端添加元素，或者获得列表的某一个片段。列表类型内部是使用双向链表（double linked list）实现的，所以向列表两端添加元素的时间复杂度为0(1)，获取越接近两端的元素速度就越快。这意味着即使是一个有几千万个元素的列表，获取头部或尾部的10条记录也是极快的。</p>
<ul>
<li><p>1：向列表两端增加元素：<br>LPUSH key value [value …]<br>RPUSH key value [value …]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">向列表左边增加元素</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lpush list:<span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line">向列表右边增加元素</span><br><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; rpush list:<span class="number">1</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line">(integer) <span class="number">6</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2：从列表两端弹出元素：<br>LPOP key<br>RPOP key<br>LPOP命令从列表左边弹出一个元素，会分两步完成，第一步是将列表左边的元素从列表中移除，第二步是返回被移除的元素值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lpop list:<span class="number">1</span></span><br><span class="line"><span class="string">"3“</span></span><br><span class="line"><span class="string">127.0.0.1:6379&gt; rpop list:1</span></span><br><span class="line"><span class="string">"</span><span class="number">6</span>“</span><br></pre></td></tr></table></figure>
</li>
<li><p>3：获取列表中元素的个数：<br>LLEN key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; llen list:<span class="number">1</span></span><br><span class="line">(integer) <span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4：获取列表片段：<br>LRANGE key start stop<br>LRANGE命令是列表类型最常用的命令之一，获取列表中的某一片段，将返回start、stop之间的所有元素（包含两端的元素），索引从0开始。索引可以是负数，如：“-1”代表最后边的一个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>lrange list:1 0 -1 这样的可以获取list:1中所有的值；</p>
<ul>
<li><p>5：删除列表中指定的值：<br>LREM key count value<br>LREM命令会删除列表中前count个值为value的元素，返回实际删除的元素个数。根据count值的不同，该命令的执行方式会有所不同：<br>当count&gt;0时， LREM会从列表左边开始删除。<br>当count&lt;0时， LREM会从列表后边开始删除。<br>当count=0时， LREM删除所有值为value的元素。</p>
</li>
<li><p>6：获得/设置指定索引的元素值：<br>LINDEX key index<br>LSET key index value</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"> <span class="number">1</span>) <span class="string">"4"</span></span><br><span class="line"> <span class="number">2</span>) <span class="string">"5"</span></span><br><span class="line"> <span class="number">3</span>) <span class="string">"3"</span></span><br><span class="line"> <span class="number">4</span>) <span class="string">"4"</span></span><br><span class="line"> <span class="number">5</span>) <span class="string">"2"</span></span><br><span class="line"> <span class="number">6</span>) <span class="string">"9"</span></span><br><span class="line"> <span class="number">7</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">8</span>) <span class="string">"1"</span></span><br><span class="line"> <span class="number">9</span>) <span class="string">"4"</span></span><br><span class="line"><span class="number">10</span>) <span class="string">"5"</span></span><br><span class="line"><span class="number">11</span>) <span class="string">"7"</span></span><br><span class="line"><span class="number">12</span>) <span class="string">"8"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lindex list:<span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="string">"3"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lset list:<span class="number">1</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"> <span class="number">1</span>) <span class="string">"4"</span></span><br><span class="line"> <span class="number">2</span>) <span class="string">"5"</span></span><br><span class="line"> <span class="number">3</span>) <span class="string">"3"</span></span><br><span class="line"> <span class="number">4</span>) <span class="string">"4"</span></span><br><span class="line"> <span class="number">5</span>) <span class="string">"2"</span></span><br><span class="line"> <span class="number">6</span>) <span class="string">"6"</span></span><br><span class="line"> <span class="number">7</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">8</span>) <span class="string">"1"</span></span><br><span class="line"> <span class="number">9</span>) <span class="string">"4"</span></span><br><span class="line"><span class="number">10</span>) <span class="string">"5"</span></span><br><span class="line"><span class="number">11</span>) <span class="string">"7"</span></span><br><span class="line"><span class="number">12</span>) <span class="string">"8"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>7：只保留列表指定片段：<br>LTRIM  key start stop;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; ltrim list:<span class="number">1</span> <span class="number">4</span> <span class="number">8</span></span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"6"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"0"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"1"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>8：向列表中插入元素：<br>LINSERT key BEFORE|AFTER pivot value;<br>该命令首先会在列表中从左到右查找值为pivot的元素，然后根据第二个参数是BEFORE还是AFTER来决定将value插入到该元素的前面还是后面。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; linsert list:<span class="number">1</span> before <span class="number">0</span> <span class="number">7</span></span><br><span class="line">(integer) <span class="number">6</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"6"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"7"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"0"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"1"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>9：将元素从一个列表转移到另一个列表中：<br>RPOPLPUSH source destination;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; rpoplpush list:<span class="number">1</span> newlist  </span><br><span class="line"><span class="comment">//这个是将list:1中的最右边的数据移到newlist这				    个新的集合中，并不是将list:1中的数据全部移除到newlist中集合中。</span></span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange newlist <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"4"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; lrange list:<span class="number">1</span> <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"6"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"7"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"0"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"1"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>应用场景<br>排队形式的应用场景都有可能应用到，可以实现队列，12306抢票，秒杀,商品评论列表。</li>
</ul>
<h2 id="Set数据类型的相关命令："><a href="#Set数据类型的相关命令：" class="headerlink" title="Set数据类型的相关命令："></a>Set数据类型的相关命令：</h2><p>提供set类型是因为列表list类型的存储的数据是有序的，并且是可以拥有相同的元素的，但是对于set数据类型的数据存储最后的数据是无序的，并且是无重复的数据；<br>常用的操作是向集合中加入或删除元素、判断某个元素是否存在等，由于集合类型的Redis内部是使用值为空的散列表实现，所有这些操作的时间复杂度都为0(1)。</p>
<ul>
<li><p>1：增加/删除元素：<br>SADD key member [member …]<br>SREM key member [member …]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sadd set1 a b c</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sadd set1 a</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; srem set1 c d</span><br><span class="line">(integer) <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2：获得集合中所有的元素：<br>SMEMBERS key；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; smembers set1</span><br><span class="line"><span class="number">1</span>) <span class="string">"a"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"b"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>判断元素是否在集合中，无论集合中有多少元素都可以极速的返回结果。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sismember set1 a</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sismember set1 c</span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>3：集合的差集运算：<br>SDIFF key [key …];</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sadd setA a b c d</span><br><span class="line">(integer) <span class="number">4</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sadd setB c d e f g</span><br><span class="line">(integer) <span class="number">5</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sdiff setA setB</span><br><span class="line"><span class="number">1</span>) <span class="string">"a"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"b"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4：集合的交集运算：<br>SINTER key [key …];</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sinter setA setB</span><br><span class="line"><span class="number">1</span>) <span class="string">"c"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"d"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>5：集合的并集运算：<br>SUNION key [key …];</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; sunion setA setB</span><br><span class="line"><span class="number">1</span>) <span class="string">"f"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"d"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"b"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"e"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"g"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"c"</span></span><br><span class="line"><span class="number">7</span>) <span class="string">"a"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>6：获得集合中元素的个数：<br>SCARD key;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; scard setA</span><br><span class="line">(integer) <span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>7: 从集合中弹出一个元素<br>SPOP key;<br>集合是无序的，所有SPOP命令会从集合中随机选择一个元素弹出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; spop setA</span><br><span class="line"><span class="string">"c“</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景<br>一般应用sdiff,sinter,sunion这三种命令比较多，比如找到两方的共同好友等等。</p>
</li>
</ul>
<h2 id="sorted-Set数据类型的相关命令："><a href="#sorted-Set数据类型的相关命令：" class="headerlink" title="sorted Set数据类型的相关命令："></a>sorted Set数据类型的相关命令：</h2><p>sorted set是有序集合，它为集合中的每一个元素都关联一个分数，我们可以完成插入，删除，判断元素是否存在在集合中，能获得分数最高或者分数最低的前N个元素，获得指定分数范围内的元素以及与分数相关的操作。<br>在某些方面有序集合和列表类型（List）有些相似。<br>(1)、二者都是有序的。<br>(2)、二者都可以获得某一范围的元素。<br>但是，二者有着很大区别：<br>(1)、列表类型是通过链表实现的，获取靠近两端的数据速度极快，而当元素增多后，访问中间数据的速度会变慢。<br>（2)、有序集合类型使用散列表实现，所有即使读取位于中间部分的数据也很快。<br>(3)、列表中不能简单的调整某个元素的位置，但是有序集合可以（通过更改分数实现）<br>(4)、有序集合要比列表类型更耗内存。 </p>
<ul>
<li><p>1:增加元素：<br>向有序集合中加入一个元素和该元素的分数，如果该元素已经存在则会用新的分数替换原有的分数。返回值是新加入到集合中的元素个数，不包含之前已经存在的元素。<br>ZADD key score member [score member …]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zadd items:sellsort <span class="number">9</span> <span class="number">1001</span> <span class="number">16</span> <span class="number">1002</span> <span class="number">12</span> <span class="number">1003</span> <span class="number">26</span> <span class="number">1004</span> <span class="number">7</span></span><br><span class="line"> <span class="number">1005</span></span><br><span class="line">(integer) <span class="number">5</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zadd items:sellsort <span class="number">15</span> <span class="number">1003</span></span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2：删除元素：<br>ZREM key member [member …]<br>移除有序集key中的一个或多个成员，不存在的成员将被忽略。<br>当key存在但不是有序集类型时，返回一个错误。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrem items:sellsort <span class="number">1005</span></span><br><span class="line">(integer) <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3：获得排名在某个范围的元素列表：<br>获得排名在某个范围的元素列表<br>ZRANGE key start stop [WITHSCORES]<br>照元素分数从小到大的顺序返回索引从start到stop之间的所有元素（包含两端的元素）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrange items:sellsort <span class="number">0</span> <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"1001"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1002"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ZREVRANGE key start stop [WITHSCORES] </p>
<p>照元素分数从大到小的顺序返回索引从start到stop之间的所有元素（包含两端的元素）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrevrange items:sellsort <span class="number">1</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"1002"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1001"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrevrange items:sellsort <span class="number">0</span> <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"1004"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1002"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1003"</span></span><br></pre></td></tr></table></figure></p>
<p>如果需要获得元素的分数的可以在命令尾部加上WITHSCORES参数<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrange items:sellsort <span class="number">1</span> <span class="number">3</span> withscores</span><br><span class="line"><span class="number">1</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"15"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>4：获得指定分数范围的元素：<br>ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrangebyscore items:sellsort <span class="number">10</span> <span class="number">20</span> withscores</span><br><span class="line"><span class="number">1</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"15"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1002"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"16"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrangebyscore items:sellsort <span class="number">5</span> <span class="number">30</span> limit <span class="number">0</span> <span class="number">2</span> withscores</span><br><span class="line"><span class="number">1</span>) <span class="string">"1001"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"9"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"15"</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrangebyscore items:sellsort <span class="number">5</span> <span class="number">30</span> limit <span class="number">1</span> <span class="number">2</span> withscores</span><br><span class="line"><span class="number">1</span>) <span class="string">"1003"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"15"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"1002"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"16"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>5：增加某个元素的分数，返回值是更改后的分数。<br>ZINCRBY  key increment member</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zincrby items:sellsort <span class="number">3</span> <span class="number">1002</span></span><br><span class="line"><span class="string">"19"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>6：获得集合中元素的数量<br>ZCARD key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zcard items:sellsort</span><br><span class="line">(integer) <span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>7：获得指定分数范围内的元素个数<br>ZCOUNT key min max</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zcount items:sellsort <span class="number">10</span> <span class="number">20</span></span><br><span class="line">(integer) <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>8：按照排名范围删除元素<br>ZREMRANGEBYRANK key start stop</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zremrangebyrank items:sellsort <span class="number">0</span> <span class="number">1</span></span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrange items:sellsort <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"1002"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1004"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ZREMRANGEBYSCORE key min max<br>按照分数范围删除元素<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zremrangebyscore items:sellsort <span class="number">2</span> <span class="number">20</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrange items:sellsort <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"1004"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>9：获取元素的排名<br>ZRANK key member<br>ZREVRANK key member</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrank items:sellsort <span class="number">1004</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; zrevrank items:sellsort <span class="number">1004</span></span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景<br>各种排行榜</p>
</li>
</ul>
<h2 id="keys命令"><a href="#keys命令" class="headerlink" title="keys命令:"></a>keys命令:</h2><ul>
<li><p>1:keys<br>返回满足给定pattern 的所有key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) <span class="string">"items:sellsort"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"person:\xac\xed\x00\x05sr\x00\x11java.lang.Integer\x12\xe2\xa0\xa4\xf7\x81\x878\x02\x00\x01I\x00\x05valuexr\x00\x10java.lang.Number\x86\xac\x95\x1d\x0b\x94\xe0\x8b\x02\x00\x00xp\x00\x00\x00\a"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"test"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2:exists<br>确认一个key 是否存在</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; exists test</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; exists tttt</span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3:type<br>返回值的类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; type test</span><br><span class="line">string</span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; type items:sellsort</span><br><span class="line">zset</span><br></pre></td></tr></table></figure>
</li>
<li><p>4:del<br>删除一个key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; del test</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span>.0.1:<span class="number">6379</span>&gt; del uuu</span><br><span class="line">(integer) <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#redis" >
    <span class="tag-code">redis</span>
  </a>

  <a href="/tags#nosql" >
    <span class="tag-code">nosql</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- 打赏 START -->
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
    <!-- 二维码 END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://yoursite.com/redis的五大数据结构/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "yanm1ng";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "redis的五大数据结构",
        owner: "yanm1ng",
        repo: "yanm1ng.github.io",
        oauth: {
          client_id: "0f87e490e00ee3fd87ef",
          client_secret: "4a9d2b148e7971c2201ad12131ce8bf8159ccd2e"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2018 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>